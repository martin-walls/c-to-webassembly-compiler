\documentclass[12pt, a4paper]{report}

\usepackage[nogeometry, MintedNumberingByChapter]{mrw}

\input{91-metadata.tex}
\input{80-title-styling.tex}

\graphicspath{{20-figures/}{21-stack-profile-plots/}}

\usepackage[margin=2cm]{geometry}

% For the bibliography
\usepackage{biblatex}
\addbibresource{90-references.bib}

% To generate the index
\usepackage{imakeidx}
\makeindex[intoc]

% For including the original project proposal
\usepackage{pdfpages}

\fancyhead[L]{\nouppercase\leftmark}
\fancyhead[R]{\nouppercase\rightmark}
\fancyfoot{}
\fancyfoot[C]{\thepage\ / \pageref{LastPage}}

\setlength{\parindent}{0pt}
\addtolength{\parskip}{1ex}
% slightly increase line spacing to be more readable
\renewcommand{\baselinestretch}{1.1}

% Caption style
\usepackage[font=small,
            labelfont=bf,
            format=hang]{caption}
% Figure references
\NewDocumentCommand{\figref}{m}{\textbf{\figurename~\ref{#1}}}
% Code references
\NewDocumentCommand{\lstref}{m}{\textbf{\listingscaption~\ref{#1}}}

% code highlighting
\setminted{frame=lines,
           framerule=0.8pt,
           framesep=6pt}
% Minted environments
\newminted[CListing]{c}{}
\newmintedfile[CInputListing]{c}{}

% For showing a directory tree in the repository overview
\usepackage{dirtree}

% Comment box for working on the dissertation
\usepackage{tcolorbox}
\NewDocumentEnvironment{Comment}{}
  {\begin{tcolorbox}[colback=blue!5!white, colframe=blue!75!black]}
  {\end{tcolorbox}}

% best loaded last in the preamble (according to https://www.overleaf.com/learn/latex/Multi-file_LaTeX_projects)
\usepackage{subfiles}

\begin{document}

\subfile{10-titlepage.tex}

\pagestyle{plain}

\subfile{11-declaration-of-originality.tex}

\subfile{12-proforma.tex}

\pagestyle{fancy}

\tableofcontents

\subfile{01-introduction}

\subfile{02-preparation}

\subfile{03-implementation}

\subfile{04-evaluation}

\subfile{05-conclusions}

\printbibliography[heading=bibintoc]

\printindex

% Start appendices
\appendix
% Show "Appendix X" instead of just "X"
\renewcommand{\ChapterNumber}{\colorbox{white}{\hspace{\ChapterNumberPadding}Appendix \thechapter\hspace{\ChapterNumberPadding}}}

\subfile{13-original-proposal.tex}

\end{document}

